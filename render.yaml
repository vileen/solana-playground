services:
  - type: web
    name: solana-snapshot-tool
    env: node
    buildCommand: |
      yarn install
      npx tsc --skipLibCheck
      npx vite build
      npx tsc --project tsconfig.json --skipLibCheck
    startCommand: node --experimental-specifier-resolution=node dist/backend/server.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: NODE_VERSION
        value: 16
      - key: YARN_VERSION
        value: 1.22.19
      - key: SOLANA_RPC_URL
        sync: false
      - key: SOLANA_API_KEY
        sync: false
    disk:
      name: data
      mountPath: /data
      sizeGB: 1 